<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cotizador de Puertas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
            background: #fafafa;
            color: #37352f;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        h1 {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 30px;
            color: #37352f;
        }

        .form-group {
            margin-bottom: 24px;
        }

        label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
            color: #37352f;
        }

        select, input[type="number"] {
            width: 100%;
            padding: 10px 12px;
            font-size: 15px;
            border: 1px solid #e0e0e0;
            background: white;
            color: #37352f;
            transition: border-color 0.2s;
        }

        select:focus, input[type="number"]:focus {
            outline: none;
            border-color: #2383e2;
        }

        .dimensions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .marco-container {
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }

        .marco-input {
            flex: 1;
        }

        .marco-unit {
            width: 120px;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 8px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .checkbox-item label {
            margin: 0;
            cursor: pointer;
            font-weight: 400;
        }

        .quote-section {
            margin-top: 40px;
            padding: 30px;
            background: #f7f6f3;
            border: 1px solid #e0e0e0;
        }

        .quote-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #37352f;
        }

        .quote-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
            font-size: 15px;
        }

        .quote-item:last-child {
            border-bottom: none;
        }

        .quote-item .description {
            flex: 1;
            color: #37352f;
        }

        .quote-item .price {
            font-weight: 500;
            color: #37352f;
            white-space: nowrap;
            margin-left: 20px;
        }

        .quote-total {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #37352f;
            display: flex;
            justify-content: space-between;
            font-size: 20px;
            font-weight: 600;
        }

        .note {
            font-size: 13px;
            color: #787774;
            margin-top: 16px;
            font-style: italic;
        }

        @media (max-width: 640px) {
            .container {
                padding: 24px;
            }

            h1 {
                font-size: 24px;
            }

            .dimensions {
                grid-template-columns: 1fr;
            }

            .marco-container {
                flex-direction: column;
                align-items: stretch;
            }

            .marco-unit {
                width: 100%;
            }

            .quote-section {
                padding: 20px;
            }

            .quote-item {
                flex-direction: column;
                gap: 4px;
            }

            .quote-item .price {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Cotizador de Puertas de Madera</h1>
        
        <div class="form-group">
            <label>Tipo de Madera</label>
            <select id="tipoMadera">
                <option value="cedro">Cedro</option>
                <option value="tornillo">Tornillo</option>
                <option value="cachimbo">Cachimbo</option>
            </select>
        </div>

        <div class="form-group">
            <label>Medidas de la Puerta</label>
            <div class="dimensions">
                <div>
                    <label style="font-weight: 400; font-size: 13px;">Ancho (metros)</label>
                    <input type="number" id="ancho" step="0.01" min="0.01" value="1.00">
                </div>
                <div>
                    <label style="font-weight: 400; font-size: 13px;">Alto (metros)</label>
                    <input type="number" id="alto" step="0.01" min="0.01" value="2.40">
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>Marco</label>
            <div class="marco-container">
                <div class="marco-input">
                    <input type="number" id="marcoValor" step="0.01" min="4" value="4">
                </div>
                <div class="marco-unit">
                    <select id="marcoUnidad">
                        <option value="pulgadas">Pulgadas</option>
                        <option value="cm">Centímetros</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>¿Requiere Jamba?</label>
            <div class="checkbox-group">
                <div class="checkbox-item">
                    <input type="checkbox" id="jamba">
                    <label for="jamba">Sí, con jamba (hasta 7 cm de ancho)</label>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>Opciones Adicionales</label>
            <div class="checkbox-group">
                <div class="checkbox-item">
                    <input type="checkbox" id="pintado">
                    <label for="pintado">Pintado (+S/. 150)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="instalado" checked>
                    <label for="instalado">Instalado (incluido)</label>
                </div>
            </div>
        </div>

        <div class="quote-section">
            <div class="quote-title">Cotización</div>
            <div id="cotizacion"></div>
        </div>
    </div>

    <script>
        function calcularCotizacion() {
            const tipoMadera = document.getElementById('tipoMadera').value;
            const ancho = parseFloat(document.getElementById('ancho').value) || 0;
            const alto = parseFloat(document.getElementById('alto').value) || 0;
            let marcoValor = parseFloat(document.getElementById('marcoValor').value) || 4;
            const marcoUnidad = document.getElementById('marcoUnidad').value;
            const conJamba = document.getElementById('jamba').checked;
            const pintado = document.getElementById('pintado').checked;
            const instalado = document.getElementById('instalado').checked;

            // Convertir marco a pulgadas si está en cm
            if (marcoUnidad === 'cm') {
                marcoValor = marcoValor / 2.54;
            }

            // Redondear marco hacia arriba
            marcoValor = Math.ceil(marcoValor);

            // Precios base
            let preciosBase = {
                cedro: 3300,
                tornillo: 2700,
                cachimbo: 2600
            };

            // Si es pintado, sumar 150 al precio base
            if (pintado) {
                preciosBase.cedro = 3500;
                preciosBase.tornillo = 2900;
                preciosBase.cachimbo = 2800;
            }

            let precioBase = preciosBase[tipoMadera];

            // Calcular precio de la puerta
            let anchoCalculo = ancho <= 1.00 ? 1 : ancho;
            let altoCalculo = alto <= 2.40 ? 2.40 : alto;

            let precioPuerta = (precioBase / 2.40) * altoCalculo * anchoCalculo;

            // Calcular adicional por marco
            const precioPorPulgada = {
                cedro: 120,
                tornillo: 100,
                cachimbo: 80
            };

            let adicionalMarco = 0;
            if (marcoValor > 4) {
                adicionalMarco = (marcoValor - 4) * precioPorPulgada[tipoMadera];
            }

            // Calcular jamba
            let precioJamba = 0;
            let jambaTexto = '';
            if (conJamba) {
                const perimetro = alto + ancho + alto;
                const metrosJamba = Math.ceil(perimetro);
                precioJamba = metrosJamba * 15;
                jambaTexto = `Jamba de 7 cm (${metrosJamba} m)`;
            }

            // Total
            let total = precioPuerta + adicionalMarco + precioJamba;

            // Si no es instalado, restar 150 del total
            if (!instalado) {
                total -= 150;
            }

            // Generar cotización
            let cotizacionHTML = '';

            // Nombre de la madera
            const nombresMadera = {
                cedro: 'Cedro',
                tornillo: 'Tornillo',
                cachimbo: 'Cachimbo'
            };

            const textoInstalada = instalado ? ' e instalada' : '';
            const textoPintado = pintado ? ' pintada' : '';

            // Ajustar precio de puerta si no es instalado
            let precioPuertaMostrar = precioPuerta;
            if (!instalado) {
                precioPuertaMostrar -= 150;
            }

            cotizacionHTML += `
                <div class="quote-item">
                    <div class="description">Puerta de madera ${nombresMadera[tipoMadera]}${textoPintado} (${ancho.toFixed(2)} m × ${alto.toFixed(2)} m)${textoInstalada}</div>
                    <div class="price">S/. ${precioPuertaMostrar.toFixed(2)}</div>
                </div>
            `;

            // Marco
            if (marcoValor <= 4) {
                cotizacionHTML += `
                    <div class="quote-item">
                        <div class="description">Marco estándar de 4"</div>
                        <div class="price">Incluido</div>
                    </div>
                `;
            } else {
                cotizacionHTML += `
                    <div class="quote-item">
                        <div class="description">Marco de ${marcoValor}"</div>
                        <div class="price">S/. ${adicionalMarco.toFixed(2)}</div>
                    </div>
                `;
            }

            // Jamba
            if (conJamba) {
                cotizacionHTML += `
                    <div class="quote-item">
                        <div class="description">${jambaTexto}</div>
                        <div class="price">S/. ${precioJamba.toFixed(2)}</div>
                    </div>
                `;
            }

            cotizacionHTML += `
                <div class="quote-total">
                    <div>TOTAL</div>
                    <div>S/. ${total.toFixed(2)}</div>
                </div>
            `;

            if (conJamba) {
                cotizacionHTML += `<div class="note">* Precio de jamba válido hasta 7 cm de ancho. Para anchos mayores, consultar.</div>`;
            }

            document.getElementById('cotizacion').innerHTML = cotizacionHTML;
        }

        // Event listeners
        document.getElementById('tipoMadera').addEventListener('change', calcularCotizacion);
        document.getElementById('ancho').addEventListener('input', calcularCotizacion);
        document.getElementById('alto').addEventListener('input', calcularCotizacion);
        document.getElementById('marcoValor').addEventListener('input', calcularCotizacion);
        document.getElementById('marcoUnidad').addEventListener('change', calcularCotizacion);
        document.getElementById('jamba').addEventListener('change', calcularCotizacion);
        document.getElementById('pintado').addEventListener('change', calcularCotizacion);
        document.getElementById('instalado').addEventListener('change', calcularCotizacion);

        // Calcular al cargar
        calcularCotizacion();
    </script>
</body>
</html>
